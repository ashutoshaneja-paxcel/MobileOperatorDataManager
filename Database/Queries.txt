CREATE DATABASE OPERATOR_DB;
USE OPERATOR_DB;

CREATE TABLE OPERATOR(OPERATOR_ID INT NOT NULL AUTO_INCREMENT, OPERATOR_NAME VARCHAR(10) NOT NULL, PRIMARY KEY(OPERATOR_ID));

CREATE TABLE REGION(REGION_ID INT NOT NULL AUTO_INCREMENT, REGION_NAME VARCHAR(10) NOT NULL, PRIMARY KEY(REGION_ID));

CREATE TABLE OPERATOR_RANGE(
OPERATOR_RANGE VARCHAR(50) NOT NULL,
OPERATOR_ID INT NOT NULL,
REGION_ID INT NOT NULL,
FOREIGN KEY(OPERATOR_ID) REFERENCES OPERATOR(OPERATOR_ID),
FOREIGN KEY(REGION_ID) REFERENCES REGION(REGION_ID));

CREATE TABLE NUMBER_DETAIL(
NUMBER BIGINT(10) NOT NULL UNIQUE, 
OPERATOR_ID INT NOT NULL, 
REGION_ID INT NOT NULL, 
PRIMARY KEY (NUMBER), 
FOREIGN KEY(OPERATOR_ID) REFERENCES OPERATOR(OPERATOR_ID), 
FOREIGN KEY(REGION_ID) REFERENCES REGION(REGION_ID) );

CREATE TABLE MESSAGE_DETAIL(
MESSAGE_ID INT NOT NULL AUTO_INCREMENT, 
FROM_NUMBER BIGINT(10) NOT NULL, 
TO_NUMBER BIGINT(10) NOT NULL, 
SENT_TIME varchar(10) NOT NULL, 
RECEIVED_TIME VARCHAR(10) NOT NULL, 
STATUS CHAR(1) NOT NULL, 
PRIMARY KEY (MESSAGE_ID),
FOREIGN KEY(FROM_NUMBER) REFERENCES NUMBER_DETAIL(NUMBER),
FOREIGN KEY(TO_NUMBER) REFERENCES NUMBER_DETAIL(NUMBER) );


ALTER TABLE MESSAGE_DETAIL ADD MESSAGE_CONTENT VARCHAR(50) NOT NULL;
